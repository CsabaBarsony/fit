(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/** @jsx React.DOM */

var Router = window.ReactRouter;
var DefaultRoute = Router.DefaultRoute;
var NotFoundRoute = Router.NotFoundRoute;
var Link = Router.Link;
var Route = Router.Route;
var RouteHandler = Router.RouteHandler;
var Home = require("./components/home");
var Exercises = require("./components/exercises");
var Workouts = require("./components/workouts");
var SetWorkout= require("./components/set_workout");
var Workout = require("./components/workout");
var NotFound = require("./components/not_found");
var auth = require("./helpers/auth");

var App = React.createClass({displayName: "App",
	getInitialState: function(){
		return { auth: "authorizing" };
	},
	componentDidMount: function(){
		var that = this;
		auth.authorize(function(result){
			if(result) that.setState({ auth: "authorized" });
			else window.location.href = auth.loginPage;
		});
	},
	logout: function(){
		this.setState({ auth: "loggingOut" });
		auth.logout(function(){
			window.location.href = auth.loginPage;
		});
	},
	render: function () {
		if(this.state.auth === "authorizing") return React.createElement("h1", null, "Authorizing...");
		else if(this.state.auth === "loggingOut") return React.createElement("h1", null, "Logging out...")
		else if(this.state.auth === "authorized"){
			return (
				React.createElement("div", null, 
					React.createElement("header", null, 
						React.createElement("ul", null, 
							React.createElement("li", null, React.createElement(Link, {to: "home"}, "Home")), 
							React.createElement("li", null, React.createElement(Link, {to: "exercises"}, "Exercises")), 
							React.createElement("li", null, React.createElement(Link, {to: "workouts"}, "Workouts")), 
							React.createElement("li", null, React.createElement(Link, {to: "set-workout"}, "Set Workout")), 
							React.createElement("li", null, 
								React.createElement("a", {href: "#", onClick: this.logout}, "Logout")
							)
						), 
						React.createElement("div", null, 
							React.createElement("p", null, "user: ", auth.getUsername())
						)
					), 
					React.createElement(RouteHandler, null)
				)
			);
		}
	}
});

var routes = (
	React.createElement(Route, {name: "home", path: "/", handler: App}, 
		React.createElement(Route, {name: "exercises", handler: Exercises}), 
		React.createElement(Route, {name: "workouts", handler: Workouts}), 
		React.createElement(Route, {name: "set-workout", handler: SetWorkout}), 
		React.createElement(Route, {name: "workout", handler: Workout}), 
		React.createElement(DefaultRoute, {handler: Home}), 
		React.createElement(NotFoundRoute, {handler: NotFound})
	)
);

Router.run(routes, function(Handler) {
	React.render(React.createElement(Handler, null), document.body);
});


},{"./components/exercises":3,"./components/home":4,"./components/not_found":5,"./components/set_workout":6,"./components/workout":8,"./components/workouts":9,"./helpers/auth":11}],2:[function(require,module,exports){
/** @jsx React.DOM */

var ExerciseForWorkout = React.createClass({displayName: "ExerciseForWorkout",
	remove: function(){
		this.props.remove(this.props.exerciseKey);
	},
	render: function(){
		var exercise = this.props.exercise;
		return (
			React.createElement("div", null, 
				React.createElement("span", null, exercise.name, " ", exercise.weight, " kg"), React.createElement("button", {onClick: this.remove}, "remove")
			)
		);
	}
});

module.exports = ExerciseForWorkout;

},{}],3:[function(require,module,exports){
/** @jsx React.DOM */

var api = require("../helpers/api");

var Exercises = React.createClass({displayName: "Exercises",
	getInitialState: function(){
		return {
			state: "loading_exercises",
			exercises: []
		}
	},
	componentDidMount: function(){
		api.get("/exercises", function(exercises){
			console.log(exercises);
		});
	},
	render: function(){
		return (
			React.createElement("h2", null, "Exercises")
		);
	}
});

module.exports = Exercises;

},{"../helpers/api":10}],4:[function(require,module,exports){
/** @jsx React.DOM */

var api = require("../helpers/api");

var Home = React.createClass({displayName: "Home",
	testGet: function(){
		api.get("/secret", function(result){
			console.log("get working", result);
		});
	},
	testPost: function(){
		api.post("/secret", { testData: "majom" }, function(result){
			console.log("post working", result);
		})
	},
	render: function(){
		return (
			React.createElement("div", null, 
				React.createElement("h2", null, "Home"), 
				React.createElement("button", {type: "text", onClick: this.testGet}, "Get"), 
				React.createElement("button", {type: "text", onClick: this.testPost}, "Post")
			)
		);
	}
});

module.exports = Home;


},{"../helpers/api":10}],5:[function(require,module,exports){
/** @jsx React.DOM */

var NotFound = React.createClass({displayName: "NotFound",
	render: function(){
		return (
			React.createElement("div", null, "Page is not found")
		);
	}
});

module.exports = NotFound;

},{}],6:[function(require,module,exports){
/** @jsx React.DOM */

var api = require("../helpers/api");
var ExerciseForWorkout = require("./exerciseForWorkout");
var Navigation = window.ReactRouter.Navigation;

var SetWorkout = React.createClass({displayName: "SetWorkout",
	mixins: [Navigation],
	getInitialState: function(){
		return {
			exercises: null,
			selectedExercise: null,
			exerciseForWorkoutList: []
		};
	},
	componentDidMount: function(){
		localStorage.setItem("workout", "");
		var that = this;
		api.get("/exercises", function(exercises){
			that.setState({
				exercises: exercises,
				selectedExercise: exercises[0]
			});
		});
	},
	addExercise: function(){
		var weight = prompt("Weight? (kg)", 0);
		var sets = prompt("Number of sets?", 1);
		var selectedExerciseList = [];
		for(var i = 0; i < sets; i++){
			selectedExerciseList.push({
				name: this.state.selectedExercise,
				weight: weight
			});
		}
		var newState = React.addons.update(this.state, {
			exerciseForWorkoutList: {
				$push: selectedExerciseList
			}
		});
		this.setState(newState);
	},
	changeExercise: function(event){
		this.setState({
			exercises: this.state.exercises,
			selectedExercise: event.target.value
		});
	},
	removeExerciseFromWorkout: function(key){
		console.log("key", key);
		var newState = React.addons.update(this.state, {
			exerciseForWorkoutList: {
				$splice: [[key, 1]]
			}
		});
		this.setState(newState);
	},
	workoutReady: function(){
		localStorage.setItem("workout", JSON.stringify({ exercises: this.state.exerciseForWorkoutList }));
		this.transitionTo("workout");
	},
	render: function(){
		if(this.state.exercises){
			var exerciseOptions = [],
				key = 0;
			_.each(this.state.exercises, function(exercise){
				var option = (
					React.createElement("option", {key: Math.random(), value: exercise}, exercise)
				);
				exerciseOptions.push(option);
			});
			var that = this;
			var exerciseForWorkoutList = [];
			_.each(this.state.exerciseForWorkoutList, function(exercise){
				// The sequence of the 'key' and 'exerciseKey' properties is important because of the incrementation
				var element = (
					React.createElement(ExerciseForWorkout, {key: key, exerciseKey: key++, exercise: exercise, remove: that.removeExerciseFromWorkout})
				);
				exerciseForWorkoutList.push(element);
			});
			var workoutReadyButton = null;
			if(this.state.exerciseForWorkoutList.length > 0){
				workoutReadyButton = (
					React.createElement("button", {onClick: this.workoutReady}, "Ready")
				);
			}
			return (
				React.createElement("div", null, 
					React.createElement("h2", null, "Set Workout"), 
					workoutReadyButton, 
					React.createElement("div", null, this.state.selectedExercise), 
					React.createElement("select", {onChange: this.changeExercise}, 
						exerciseOptions
					), 
					React.createElement("button", {onClick: this.addExercise}, "Add exercise"), 
					exerciseForWorkoutList
				)
			);
		}
		else{
			return (
				React.createElement("h2", null, "Loading...")
			);
		}
	}
});

module.exports = SetWorkout;

},{"../helpers/api":10,"./exerciseForWorkout":2}],7:[function(require,module,exports){
/** @jsx React.DOM */

var Stopwatch = React.createClass({displayName: "Stopwatch",
	getInitialState: function(){
		return {
			ts: 0
		};
	},
	start: function(restart){
		if(restart) this.state.ts = 0;
		var that = this;
		this.interval = setInterval(function(){
			that.setState({
				phase: "run",
				ts: that.state.ts + 100
			});
		}, 100);
		this.paused = false;
	},
	pause: function(){
		clearInterval(this.interval);
		this.paused = true;
		this.props.getTs(this.state.ts);
	},
	interval: 0,
	paused: false,
	render: function(){
		if(this.props.phase === "exercise" && (this.state.ts === 0 || this.paused)){
			this.start(this.paused);
		}
		if(this.props.phase === "pause" || this.props.phase === "completed"){
			this.pause();
		}
		return (
			React.createElement("div", null, 
				React.createElement("p", null, this.state.ts)
			)
		);
	}
});

module.exports = Stopwatch;

},{}],8:[function(require,module,exports){
/** @jsx React.DOM */

var api = require("../helpers/api");
var Stopwatch = require("./stopwatch");

var Workout = React.createClass({displayName: "Workout",
	getInitialState: function(){
		return {
			workout: JSON.parse(localStorage.getItem("workout")),
			exercise: 0,
			phase: "init"
		};
	},
	controlButtonClick: function(){
		if(this.state.phase === "init"){
			this.setState({
				workout: this.state.workout,
				exercise: this.state.exercise,
				phase: "exercise"
			});
		}
		else if(this.state.phase === "exercise"){
			if(this.state.workout.exercises.length - 1 > this.state.exercise){
				this.setState({
					workout: this.state.workout,
					exercise: this.state.exercise + 1,
					phase: "pause"
				});
			}
			else{
				this.setState({
					workout: this.state.workout,
					exercise: this.state.exercise,
					phase: "completed"
				});
			}
		}
		else if(this.state.phase === "pause"){
			this.setState({
				workout: this.state.workout,
				exercise: this.state.exercise,
				phase: "exercise"
			});
		}
		else if(this.state.phase === "completed"){
			if(this.state.workout.exercises.length !== this.tsList.length) throw new Error("baj van");
			var result = [];
			for(var i = 0, l = this.state.workout.exercises.length; i < l; i++){
				var exercise = this.state.workout.exercises[i];
				exercise.ts = this.tsList[i];
				result.push(exercise);
			}
			console.log(result);
			api.postWorkout(result, function(response){
				console.log("api post successful", response);
			});
		}
	},
	getStopwatchTs: function(ts){
		this.tsList.push(ts);
		console.log(this.tsList);
	},
	getControlButtonText: function(){
		var phase = this.state.phase;
		if(phase === "init") return "Begin Workout";
		else if(phase === "exercise") return "Ready";
		else if(phase === "pause") return "Start";
		else if(phase === "completed") return "Finish Workout";
	},
	tsList: [],
	render: function(){
		var actualExercise = (
			React.createElement("strong", null, "actual: ", this.state.workout.exercises[this.state.exercise].name, " ", this.state.workout.exercises[this.state.exercise].weight, "kg")
		);
		var nextExercise;
		if(this.state.exercise !== this.state.workout.exercises.length - 1){
			nextExercise = (
				React.createElement("strong", null, "next: ", this.state.workout.exercises[this.state.exercise + 1].name, " ", this.state.workout.exercises[this.state.exercise].weight, "kg")
			);
		}
		return (
			React.createElement("div", null, 
				React.createElement("h2", null, "Workout"), 
				actualExercise, React.createElement("br", null), 
				nextExercise, React.createElement("br", null), 
				React.createElement("button", {onClick: this.controlButtonClick}, this.getControlButtonText()), 
				React.createElement(Stopwatch, {phase: this.state.phase, getTs: this.getStopwatchTs})
			)
		);
	}
});

module.exports = Workout;

},{"../helpers/api":10,"./stopwatch":7}],9:[function(require,module,exports){
/** @jsx React.DOM */

var api = require("../helpers/api");

var Workouts = React.createClass({displayName: "Workouts",
	getInitialState: function(){
		return {
			state: "loading_workouts",
			exercises: []
		}
	},
	componentDidMount: function(){
		api.get("/workouts", function(workouts){
			console.log(workouts);
		});
	},
	render: function(){
		return (
			React.createElement("h2", null, "Workouts")
		);
	}
});

module.exports = Workouts;

},{"../helpers/api":10}],10:[function(require,module,exports){
var auth = require("./auth");

module.exports = {
	log: function(text){
		console.log(text);
	},
	get: function(url, success){
		$.ajax({
			url: url,
			type: 'GET',
			headers: {
				"x-auth-token": auth.getToken(),
				"x-auth-username": auth.getUsername()
			},
			success: function(result) {
				success(result);
			}.bind(this),
			error: function(xhr, status, err) {
				console.log(status);
				if(xhr.status >= 400) window.location.href = auth.loginPage;
			}.bind(this)
		});
	},
	post: function(url, data, success){
		$.ajax({
			url: url,
			type: 'POST',
			data: data,
			headers: {
				"x-auth-token": auth.getToken(),
				"x-auth-username": auth.getUsername()
			},
			success: function(result) {
				success(result);
			}.bind(this),
			error: function(xhr, status, err) {
				console.log(status);
				if(xhr.status >= 400) window.location.href = auth.loginPage;
			}.bind(this)
		});
	},
	postWorkout: function(workout, success){
		$.ajax({
			url: "/workout",
			type: 'POST',
			data: JSON.stringify({ ts: 1, workout: workout }),
			headers: {
				"x-auth-token": auth.getToken(),
				"x-auth-username": auth.getUsername()
			},
			success: function(result) {
				success(result);
			}.bind(this),
			error: function(xhr, status, err) {
				console.log(status);
				if(xhr.status >= 400 && xhr.status < 500) window.location.href = auth.loginPage;
			}.bind(this)
		});
	}
};

},{"./auth":11}],11:[function(require,module,exports){
var auth = {
	loginPage: "/login.html",
	logout: function(callback){
		$.ajax({
			url: "/logout",
			type: 'POST',
			data: {
				username: this.getUsername()
			},
			success: function(result) {
				delete localStorage.token;
				delete localStorage.username;
				callback();
			}.bind(this),
			error: function(xhr, status, err) {
				console.log("error while loggint out");
				delete localStorage.token;
				delete localStorage.username;
				callback();
			}.bind(this)
		});
	},
	authorize: function(callback){
		if(!this.getToken()) {
			callback(false);
			return;
		}

		$.ajax({
			url: "/authorize",
			type: 'GET',
			headers: {
				"x-auth-token": this.getToken(),
				"x-auth-username": this.getUsername()
			},
			success: function(result) {
				callback(true);
			}.bind(this),
			error: function(xhr, status, err) {
				callback(false);
			}.bind(this)
		});
	},
	getToken: function(){
		return localStorage.token;
	},
	getUsername: function(){
		return localStorage.username;
	},
	loggedIn: function(){
		return this.getToken();
	},
	onChange: function(){}
};

module.exports = auth;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwiQzpcXGRldlxcd2ViXFxmaXRcXHNyY1xcc2NyaXB0c1xcbWFpbi5qcyIsIkM6XFxkZXZcXHdlYlxcZml0XFxzcmNcXHNjcmlwdHNcXGNvbXBvbmVudHNcXGV4ZXJjaXNlRm9yV29ya291dC5qcyIsIkM6XFxkZXZcXHdlYlxcZml0XFxzcmNcXHNjcmlwdHNcXGNvbXBvbmVudHNcXGV4ZXJjaXNlcy5qcyIsIkM6XFxkZXZcXHdlYlxcZml0XFxzcmNcXHNjcmlwdHNcXGNvbXBvbmVudHNcXGhvbWUuanMiLCJDOlxcZGV2XFx3ZWJcXGZpdFxcc3JjXFxzY3JpcHRzXFxjb21wb25lbnRzXFxub3RfZm91bmQuanMiLCJDOlxcZGV2XFx3ZWJcXGZpdFxcc3JjXFxzY3JpcHRzXFxjb21wb25lbnRzXFxzZXRfd29ya291dC5qcyIsIkM6XFxkZXZcXHdlYlxcZml0XFxzcmNcXHNjcmlwdHNcXGNvbXBvbmVudHNcXHN0b3B3YXRjaC5qcyIsIkM6XFxkZXZcXHdlYlxcZml0XFxzcmNcXHNjcmlwdHNcXGNvbXBvbmVudHNcXHdvcmtvdXQuanMiLCJDOlxcZGV2XFx3ZWJcXGZpdFxcc3JjXFxzY3JpcHRzXFxjb21wb25lbnRzXFx3b3Jrb3V0cy5qcyIsIkM6XFxkZXZcXHdlYlxcZml0XFxzcmNcXHNjcmlwdHNcXGhlbHBlcnNcXGFwaS5qcyIsIkM6XFxkZXZcXHdlYlxcZml0XFxzcmNcXHNjcmlwdHNcXGhlbHBlcnNcXGF1dGguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxxQkFBcUI7O0FBRXJCLElBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUM7QUFDaEMsSUFBSSxZQUFZLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQztBQUN2QyxJQUFJLGFBQWEsR0FBRyxNQUFNLENBQUMsYUFBYSxDQUFDO0FBQ3pDLElBQUksSUFB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QUNELFdBQVcsRUFBRSxVQUFVO0VBQ3RCLE9BQU8sWUFBWSxDQUFDLFFBQVEsQ0FBQztFQUM3QjtDQUNELFFBQVEsRUFBRSxVQUFVO0VBQ25CLE9BQU8sSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO0VBQ3ZCO0NBQ0QsUUFBUSxFQUFFLFVBQVUsRUFBRTtBQUN2QixDQUFDLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xyXG5cclxudmFyIFJvdXRlciA9IHdpbmRvdy5SZWFjdFJvdXRlcjtcclxudmFyIERlZmF1bHRSb3V0ZSA9IFJvdXRlci5EZWZhdWx0Um91dGU7XHJcbnZhciBOb3RGb3VuZFJvdXRlID0gUm91dGVyLk5vdEZvdW5kUm91dGU7XHJcbnZhciBMaW5rID0gUm91dGVyLkxpbms7XHJcbnZhciBSb3V0ZSA9IFJvdXRlci5Sb3V0ZTtcclxudmFyIFJvdXRlSGFuZGxlciA9IFJvdXRlci5Sb3V0ZUhhbmRsZXI7XHJcbnZhciBIb21lID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9ob21lXCIpO1xyXG52YXIgRXhlcmNpc2VzID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9leGVyY2lzZXNcIik7XHJcbnZhciBXb3Jrb3V0cyA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvd29ya291dHNcIik7XHJcbnZhciBTZXRXb3Jrb3V0PSByZXF1aXJlKFwiLi9jb21wb25lbnRzL3NldF93b3Jrb3V0XCIpO1xyXG52YXIgV29ya291dCA9IHJlcXVpcmUoXCIuL2NvbXBvbmVudHMvd29ya291dFwiKTtcclxudmFyIE5vdEZvdW5kID0gcmVxdWlyZShcIi4vY29tcG9uZW50cy9ub3RfZm91bmRcIik7XHJcbnZhciBhdXRoID0gcmVxdWlyZShcIi4vaGVscGVycy9hdXRoXCIpO1xyXG5cclxudmFyIEFwcCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuXHRnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCl7XHJcblx0XHRyZXR1cm4geyBhdXRoOiBcImF1dGhvcml6aW5nXCIgfTtcclxuXHR9LFxyXG5cdGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpe1xyXG5cdFx0dmFyIHRoYXQgPSB0aGlzO1xyXG5cdFx0YXV0aC5hdXRob3JpemUoZnVuY3Rpb24ocmVzdWx0KXtcclxuXHRcdFx0aWYocmVzdWx0KSB0aGF0LnNldFN0YXRlKHsgYXV0aDogXCJhdXRob3JpemVkXCIgfSk7XHJcblx0XHRcdGVsc2Ugd2luZG93LmxvY2F0aW9uLmhyZWYgPSBhdXRoLmxvZ2luUGFnZTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblx0bG9nb3V0OiBmdW5jdGlvbigpe1xyXG5cdFx0dGhpcy5zZXRTdGF0ZSh7IGF1dGg6IFwibG9nZ2luZ091dFwiIH0pO1xyXG5cdFx0YXV0aC5sb2dvdXQoZnVuY3Rpb24oKXtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSBhdXRoLmxvZ2luUGFnZTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblx0cmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRpZih0aGlzLnN0YXRlLmF1dGggPT09IFwiYXV0aG9yaXppbmdcIikgcmV0dXJuIDxoMT5BdXRob3JpemluZy4uLjwvaDE+O1xyXG5cdFx0ZWxzZSBpZih0aGlzLnN0YXRlLmF1dGggPT09IFwibG9nZ2luZ091dFwiKSByZXR1cm4gPGgxPkxvZ2dpbmcgb3V0Li4uPC9oMT5cclxuXHRcdGVsc2UgaWYodGhpcy5zdGF0ZS5hdXRoID09PSBcImF1dGhvcml6ZWRcIil7XHJcblx0XHRcdHJldHVybiAoXHJcblx0XHRcdFx0PGRpdj5cclxuXHRcdFx0XHRcdDxoZWFkZXI+XHJcblx0XHRcdFx0XHRcdDx1bD5cclxuXHRcdFx0XHRcdFx0XHQ8bGk+PExpbmsgdG89XCJob21lXCI+SG9tZTwvTGluaz48L2xpPlxyXG5cdFx0XHRcdFx0XHRcdDxsaT48TGluayB0bz1cImV4ZXJjaXNlc1wiPkV4ZXJjaXNlczwvTGluaz48L2xpPlxyXG5cdFx0XHRcdFx0XHRcdDxsaT48TGluayB0bz1cIndvcmtvdXRzXCI+V29ya291dHM8L0xpbms+PC9saT5cclxuXHRcdFx0XHRcdFx0XHQ8bGk+PExpbmsgdG89XCJzZXQtd29ya291dFwiPlNldCBXb3Jrb3V0PC9MaW5rPjwvbGk+XHJcblx0XHRcdFx0XHRcdFx0PGxpPlxyXG5cdFx0XHRcdFx0XHRcdFx0PGEgaHJlZj1cIiNcIiBvbkNsaWNrPXt0aGlzLmxvZ291dH0+TG9nb3V0PC9hPlxyXG5cdFx0XHRcdFx0XHRcdDwvbGk+XHJcblx0XHRcdFx0XHRcdDwvdWw+XHJcblx0XHRcdFx0XHRcdDxkaXY+XHJcblx0XHRcdFx0XHRcdFx0PHA+dXNlcjoge2F1dGguZ2V0VXNlcm5hbWUoKX08L3A+XHJcblx0XHRcdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHRcdFx0PC9oZWFkZXI+XHJcblx0XHRcdFx0XHQ8Um91dGVIYW5kbGVyLz5cclxuXHRcdFx0XHQ8L2Rpdj5cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxudmFyIHJvdXRlcyA9IChcclxuXHQ8Um91dGUgbmFtZT1cImhvbWVcIiBwYXRoPVwiL1wiIGhhbmRsZXI9e0FwcH0+XHJcblx0XHQ8Um91dGUgbmFtZT1cImV4ZXJjaXNlc1wiIGhhbmRsZXI9e0V4ZXJjaXNlc30vPlxyXG5cdFx0PFJvdXRlIG5hbWU9XCJ3b3Jrb3V0c1wiIGhhbmRsZXI9e1dvcmtvdXRzfS8+XHJcblx0XHQ8Um91dGUgbmFtZT1cInNldC13b3Jrb3V0XCIgaGFuZGxlcj17U2V0V29ya291dH0vPlxyXG5cdFx0PFJvdXRlIG5hbWU9XCJ3b3Jrb3V0XCIgaGFuZGxlcj17V29ya291dH0vPlxyXG5cdFx0PERlZmF1bHRSb3V0ZSBoYW5kbGVyPXtIb21lfS8+XHJcblx0XHQ8Tm90Rm91bmRSb3V0ZSBoYW5kbGVyPXtOb3RGb3VuZH0vPlxyXG5cdDwvUm91dGU+XHJcbik7XHJcblxyXG5Sb3V0ZXIucnVuKHJvdXRlcywgZnVuY3Rpb24oSGFuZGxlcikge1xyXG5cdFJlYWN0LnJlbmRlcig8SGFuZGxlci8+LCBkb2N1bWVudC5ib2R5KTtcclxufSk7XHJcbiIsIi8qKiBAanN4IFJlYWN0LkRPTSAqL1xyXG5cclxudmFyIEV4ZXJjaXNlRm9yV29ya291dCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuXHRyZW1vdmU6IGZ1bmN0aW9uKCl7XHJcblx0XHR0aGlzLnByb3BzLnJlbW92ZSh0aGlzLnByb3BzLmV4ZXJjaXNlS2V5KTtcclxuXHR9LFxyXG5cdHJlbmRlcjogZnVuY3Rpb24oKXtcclxuXHRcdHZhciBleGVyY2lzZSA9IHRoaXMucHJvcHMuZXhlcmNpc2U7XHJcblx0XHRyZXR1cm4gKFxyXG5cdFx0XHQ8ZGl2PlxyXG5cdFx0XHRcdDxzcGFuPntleGVyY2lzZS5uYW1lfSB7ZXhlcmNpc2Uud2VpZ2h0fSBrZzwvc3Bhbj48YnV0dG9uIG9uQ2xpY2s9e3RoaXMucmVtb3ZlfT5yZW1vdmU8L2J1dHRvbj5cclxuXHRcdFx0PC9kaXY+XHJcblx0XHQpO1xyXG5cdH1cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEV4ZXJjaXNlRm9yV29ya291dDsiLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cclxuXHJcbnZhciBhcGkgPSByZXF1aXJlKFwiLi4vaGVscGVycy9hcGlcIik7XHJcblxyXG52YXIgRXhlcmNpc2VzID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xyXG5cdGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHN0YXRlOiBcImxvYWRpbmdfZXhlcmNpc2VzXCIsXHJcblx0XHRcdGV4ZXJjaXNlczogW11cclxuXHRcdH1cclxuXHR9LFxyXG5cdGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpe1xyXG5cdFx0YXBpLmdldChcIi9leGVyY2lzZXNcIiwgZnVuY3Rpb24oZXhlcmNpc2VzKXtcclxuXHRcdFx0Y29uc29sZS5sb2coZXhlcmNpc2VzKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblx0cmVuZGVyOiBmdW5jdGlvbigpe1xyXG5cdFx0cmV0dXJuIChcclxuXHRcdFx0PGgyPkV4ZXJjaXNlczwvaDI+XHJcblx0XHQpO1xyXG5cdH1cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEV4ZXJjaXNlczsiLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cclxuXHJcbnZhciBhcGkgPSByZXF1aXJlKFwiLi4vaGVscGVycy9hcGlcIik7XHJcblxyXG52YXIgSG9tZSA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuXHR0ZXN0R2V0OiBmdW5jdGlvbigpe1xyXG5cdFx0YXBpLmdldChcIi9zZWNyZXRcIiwgZnVuY3Rpb24ocmVzdWx0KXtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJnZXQgd29ya2luZ1wiLCByZXN1bHQpO1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHR0ZXN0UG9zdDogZnVuY3Rpb24oKXtcclxuXHRcdGFwaS5wb3N0KFwiL3NlY3JldFwiLCB7IHRlc3REYXRhOiBcIm1ham9tXCIgfSwgZnVuY3Rpb24ocmVzdWx0KXtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJwb3N0IHdvcmtpbmdcIiwgcmVzdWx0KTtcclxuXHRcdH0pXHJcblx0fSxcclxuXHRyZW5kZXI6IGZ1bmN0aW9uKCl7XHJcblx0XHRyZXR1cm4gKFxyXG5cdFx0XHQ8ZGl2PlxyXG5cdFx0XHRcdDxoMj5Ib21lPC9oMj5cclxuXHRcdFx0XHQ8YnV0dG9uIHR5cGU9XCJ0ZXh0XCIgb25DbGljaz17dGhpcy50ZXN0R2V0fT5HZXQ8L2J1dHRvbj5cclxuXHRcdFx0XHQ8YnV0dG9uIHR5cGU9XCJ0ZXh0XCIgb25DbGljaz17dGhpcy50ZXN0UG9zdH0+UG9zdDwvYnV0dG9uPlxyXG5cdFx0XHQ8L2Rpdj5cclxuXHRcdCk7XHJcblx0fVxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSG9tZTtcclxuIiwiLyoqIEBqc3ggUmVhY3QuRE9NICovXHJcblxyXG52YXIgTm90Rm91bmQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcblx0cmVuZGVyOiBmdW5jdGlvbigpe1xyXG5cdFx0cmV0dXJuIChcclxuXHRcdFx0PGRpdj5QYWdlIGlzIG5vdCBmb3VuZDwvZGl2PlxyXG5cdFx0KTtcclxuXHR9XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOb3RGb3VuZDsiLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cclxuXHJcbnZhciBhcGkgPSByZXF1aXJlKFwiLi4vaGVscGVycy9hcGlcIik7XHJcbnZhciBFeGVyY2lzZUZvcldvcmtvdXQgPSByZXF1aXJlKFwiLi9leGVyY2lzZUZvcldvcmtvdXRcIik7XHJcbnZhciBOYXZpZ2F0aW9uID0gd2luZG93LlJlYWN0Um91dGVyLk5hdmlnYXRpb247XHJcblxyXG52YXIgU2V0V29ya291dCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuXHRtaXhpbnM6IFtOYXZpZ2F0aW9uXSxcclxuXHRnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCl7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRleGVyY2lzZXM6IG51bGwsXHJcblx0XHRcdHNlbGVjdGVkRXhlcmNpc2U6IG51bGwsXHJcblx0XHRcdGV4ZXJjaXNlRm9yV29ya291dExpc3Q6IFtdXHJcblx0XHR9O1xyXG5cdH0sXHJcblx0Y29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCl7XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIndvcmtvdXRcIiwgXCJcIik7XHJcblx0XHR2YXIgdGhhdCA9IHRoaXM7XHJcblx0XHRhcGkuZ2V0KFwiL2V4ZXJjaXNlc1wiLCBmdW5jdGlvbihleGVyY2lzZXMpe1xyXG5cdFx0XHR0aGF0LnNldFN0YXRlKHtcclxuXHRcdFx0XHRleGVyY2lzZXM6IGV4ZXJjaXNlcyxcclxuXHRcdFx0XHRzZWxlY3RlZEV4ZXJjaXNlOiBleGVyY2lzZXNbMF1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cdGFkZEV4ZXJjaXNlOiBmdW5jdGlvbigpe1xyXG5cdFx0dmFyIHdlaWdodCA9IHByb21wdChcIldlaWdodD8gKGtnKVwiLCAwKTtcclxuXHRcdHZhciBzZXRzID0gcHJvbXB0KFwiTnVtYmVyIG9mIHNldHM/XCIsIDEpO1xyXG5cdFx0dmFyIHNlbGVjdGVkRXhlcmNpc2VMaXN0ID0gW107XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc2V0czsgaSsrKXtcclxuXHRcdFx0c2VsZWN0ZWRFeGVyY2lzZUxpc3QucHVzaCh7XHJcblx0XHRcdFx0bmFtZTogdGhpcy5zdGF0ZS5zZWxlY3RlZEV4ZXJjaXNlLFxyXG5cdFx0XHRcdHdlaWdodDogd2VpZ2h0XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0dmFyIG5ld1N0YXRlID0gUmVhY3QuYWRkb25zLnVwZGF0ZSh0aGlzLnN0YXRlLCB7XHJcblx0XHRcdGV4ZXJjaXNlRm9yV29ya291dExpc3Q6IHtcclxuXHRcdFx0XHQkcHVzaDogc2VsZWN0ZWRFeGVyY2lzZUxpc3RcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnNldFN0YXRlKG5ld1N0YXRlKTtcclxuXHR9LFxyXG5cdGNoYW5nZUV4ZXJjaXNlOiBmdW5jdGlvbihldmVudCl7XHJcblx0XHR0aGlzLnNldFN0YXRlKHtcclxuXHRcdFx0ZXhlcmNpc2VzOiB0aGlzLnN0YXRlLmV4ZXJjaXNlcyxcclxuXHRcdFx0c2VsZWN0ZWRFeGVyY2lzZTogZXZlbnQudGFyZ2V0LnZhbHVlXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cdHJlbW92ZUV4ZXJjaXNlRnJvbVdvcmtvdXQ6IGZ1bmN0aW9uKGtleSl7XHJcblx0XHRjb25zb2xlLmxvZyhcImtleVwiLCBrZXkpO1xyXG5cdFx0dmFyIG5ld1N0YXRlID0gUmVhY3QuYWRkb25zLnVwZGF0ZSh0aGlzLnN0YXRlLCB7XHJcblx0XHRcdGV4ZXJjaXNlRm9yV29ya291dExpc3Q6IHtcclxuXHRcdFx0XHQkc3BsaWNlOiBbW2tleSwgMV1dXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5zZXRTdGF0ZShuZXdTdGF0ZSk7XHJcblx0fSxcclxuXHR3b3Jrb3V0UmVhZHk6IGZ1bmN0aW9uKCl7XHJcblx0XHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIndvcmtvdXRcIiwgSlNPTi5zdHJpbmdpZnkoeyBleGVyY2lzZXM6IHRoaXMuc3RhdGUuZXhlcmNpc2VGb3JXb3Jrb3V0TGlzdCB9KSk7XHJcblx0XHR0aGlzLnRyYW5zaXRpb25UbyhcIndvcmtvdXRcIik7XHJcblx0fSxcclxuXHRyZW5kZXI6IGZ1bmN0aW9uKCl7XHJcblx0XHRpZih0aGlzLnN0YXRlLmV4ZXJjaXNlcyl7XHJcblx0XHRcdHZhciBleGVyY2lzZU9wdGlvbnMgPSBbXSxcclxuXHRcdFx0XHRrZXkgPSAwO1xyXG5cdFx0XHRfLmVhY2godGhpcy5zdGF0ZS5leGVyY2lzZXMsIGZ1bmN0aW9uKGV4ZXJjaXNlKXtcclxuXHRcdFx0XHR2YXIgb3B0aW9uID0gKFxyXG5cdFx0XHRcdFx0PG9wdGlvbiBrZXk9e01hdGgucmFuZG9tKCl9IHZhbHVlPXtleGVyY2lzZX0+e2V4ZXJjaXNlfTwvb3B0aW9uPlxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0ZXhlcmNpc2VPcHRpb25zLnB1c2gob3B0aW9uKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHZhciB0aGF0ID0gdGhpcztcclxuXHRcdFx0dmFyIGV4ZXJjaXNlRm9yV29ya291dExpc3QgPSBbXTtcclxuXHRcdFx0Xy5lYWNoKHRoaXMuc3RhdGUuZXhlcmNpc2VGb3JXb3Jrb3V0TGlzdCwgZnVuY3Rpb24oZXhlcmNpc2Upe1xyXG5cdFx0XHRcdC8vIFRoZSBzZXF1ZW5jZSBvZiB0aGUgJ2tleScgYW5kICdleGVyY2lzZUtleScgcHJvcGVydGllcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSBvZiB0aGUgaW5jcmVtZW50YXRpb25cclxuXHRcdFx0XHR2YXIgZWxlbWVudCA9IChcclxuXHRcdFx0XHRcdDxFeGVyY2lzZUZvcldvcmtvdXQga2V5PXtrZXl9IGV4ZXJjaXNlS2V5PXtrZXkrK30gZXhlcmNpc2U9e2V4ZXJjaXNlfSByZW1vdmU9e3RoYXQucmVtb3ZlRXhlcmNpc2VGcm9tV29ya291dH0vPlxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0ZXhlcmNpc2VGb3JXb3Jrb3V0TGlzdC5wdXNoKGVsZW1lbnQpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0dmFyIHdvcmtvdXRSZWFkeUJ1dHRvbiA9IG51bGw7XHJcblx0XHRcdGlmKHRoaXMuc3RhdGUuZXhlcmNpc2VGb3JXb3Jrb3V0TGlzdC5sZW5ndGggPiAwKXtcclxuXHRcdFx0XHR3b3Jrb3V0UmVhZHlCdXR0b24gPSAoXHJcblx0XHRcdFx0XHQ8YnV0dG9uIG9uQ2xpY2s9e3RoaXMud29ya291dFJlYWR5fT5SZWFkeTwvYnV0dG9uPlxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIChcclxuXHRcdFx0XHQ8ZGl2PlxyXG5cdFx0XHRcdFx0PGgyPlNldCBXb3Jrb3V0PC9oMj5cclxuXHRcdFx0XHRcdHt3b3Jrb3V0UmVhZHlCdXR0b259XHJcblx0XHRcdFx0XHQ8ZGl2Pnt0aGlzLnN0YXRlLnNlbGVjdGVkRXhlcmNpc2V9PC9kaXY+XHJcblx0XHRcdFx0XHQ8c2VsZWN0IG9uQ2hhbmdlPXt0aGlzLmNoYW5nZUV4ZXJjaXNlfT5cclxuXHRcdFx0XHRcdFx0e2V4ZXJjaXNlT3B0aW9uc31cclxuXHRcdFx0XHRcdDwvc2VsZWN0PlxyXG5cdFx0XHRcdFx0PGJ1dHRvbiBvbkNsaWNrPXt0aGlzLmFkZEV4ZXJjaXNlfT5BZGQgZXhlcmNpc2U8L2J1dHRvbj5cclxuXHRcdFx0XHRcdHtleGVyY2lzZUZvcldvcmtvdXRMaXN0fVxyXG5cdFx0XHRcdDwvZGl2PlxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZXtcclxuXHRcdFx0cmV0dXJuIChcclxuXHRcdFx0XHQ8aDI+TG9hZGluZy4uLjwvaDI+XHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU2V0V29ya291dDsiLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cclxuXHJcbnZhciBTdG9wd2F0Y2ggPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcblx0Z2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpe1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0dHM6IDBcclxuXHRcdH07XHJcblx0fSxcclxuXHRzdGFydDogZnVuY3Rpb24ocmVzdGFydCl7XHJcblx0XHRpZihyZXN0YXJ0KSB0aGlzLnN0YXRlLnRzID0gMDtcclxuXHRcdHZhciB0aGF0ID0gdGhpcztcclxuXHRcdHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xyXG5cdFx0XHR0aGF0LnNldFN0YXRlKHtcclxuXHRcdFx0XHRwaGFzZTogXCJydW5cIixcclxuXHRcdFx0XHR0czogdGhhdC5zdGF0ZS50cyArIDEwMFxyXG5cdFx0XHR9KTtcclxuXHRcdH0sIDEwMCk7XHJcblx0XHR0aGlzLnBhdXNlZCA9IGZhbHNlO1xyXG5cdH0sXHJcblx0cGF1c2U6IGZ1bmN0aW9uKCl7XHJcblx0XHRjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xyXG5cdFx0dGhpcy5wYXVzZWQgPSB0cnVlO1xyXG5cdFx0dGhpcy5wcm9wcy5nZXRUcyh0aGlzLnN0YXRlLnRzKTtcclxuXHR9LFxyXG5cdGludGVydmFsOiAwLFxyXG5cdHBhdXNlZDogZmFsc2UsXHJcblx0cmVuZGVyOiBmdW5jdGlvbigpe1xyXG5cdFx0aWYodGhpcy5wcm9wcy5waGFzZSA9PT0gXCJleGVyY2lzZVwiICYmICh0aGlzLnN0YXRlLnRzID09PSAwIHx8IHRoaXMucGF1c2VkKSl7XHJcblx0XHRcdHRoaXMuc3RhcnQodGhpcy5wYXVzZWQpO1xyXG5cdFx0fVxyXG5cdFx0aWYodGhpcy5wcm9wcy5waGFzZSA9PT0gXCJwYXVzZVwiIHx8IHRoaXMucHJvcHMucGhhc2UgPT09IFwiY29tcGxldGVkXCIpe1xyXG5cdFx0XHR0aGlzLnBhdXNlKCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gKFxyXG5cdFx0XHQ8ZGl2PlxyXG5cdFx0XHRcdDxwPnt0aGlzLnN0YXRlLnRzfTwvcD5cclxuXHRcdFx0PC9kaXY+XHJcblx0XHQpO1xyXG5cdH1cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFN0b3B3YXRjaDsiLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cclxuXHJcbnZhciBhcGkgPSByZXF1aXJlKFwiLi4vaGVscGVycy9hcGlcIik7XHJcbnZhciBTdG9wd2F0Y2ggPSByZXF1aXJlKFwiLi9zdG9wd2F0Y2hcIik7XHJcblxyXG52YXIgV29ya291dCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcclxuXHRnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCl7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHR3b3Jrb3V0OiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwid29ya291dFwiKSksXHJcblx0XHRcdGV4ZXJjaXNlOiAwLFxyXG5cdFx0XHRwaGFzZTogXCJpbml0XCJcclxuXHRcdH07XHJcblx0fSxcclxuXHRjb250cm9sQnV0dG9uQ2xpY2s6IGZ1bmN0aW9uKCl7XHJcblx0XHRpZih0aGlzLnN0YXRlLnBoYXNlID09PSBcImluaXRcIil7XHJcblx0XHRcdHRoaXMuc2V0U3RhdGUoe1xyXG5cdFx0XHRcdHdvcmtvdXQ6IHRoaXMuc3RhdGUud29ya291dCxcclxuXHRcdFx0XHRleGVyY2lzZTogdGhpcy5zdGF0ZS5leGVyY2lzZSxcclxuXHRcdFx0XHRwaGFzZTogXCJleGVyY2lzZVwiXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZih0aGlzLnN0YXRlLnBoYXNlID09PSBcImV4ZXJjaXNlXCIpe1xyXG5cdFx0XHRpZih0aGlzLnN0YXRlLndvcmtvdXQuZXhlcmNpc2VzLmxlbmd0aCAtIDEgPiB0aGlzLnN0YXRlLmV4ZXJjaXNlKXtcclxuXHRcdFx0XHR0aGlzLnNldFN0YXRlKHtcclxuXHRcdFx0XHRcdHdvcmtvdXQ6IHRoaXMuc3RhdGUud29ya291dCxcclxuXHRcdFx0XHRcdGV4ZXJjaXNlOiB0aGlzLnN0YXRlLmV4ZXJjaXNlICsgMSxcclxuXHRcdFx0XHRcdHBoYXNlOiBcInBhdXNlXCJcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNle1xyXG5cdFx0XHRcdHRoaXMuc2V0U3RhdGUoe1xyXG5cdFx0XHRcdFx0d29ya291dDogdGhpcy5zdGF0ZS53b3Jrb3V0LFxyXG5cdFx0XHRcdFx0ZXhlcmNpc2U6IHRoaXMuc3RhdGUuZXhlcmNpc2UsXHJcblx0XHRcdFx0XHRwaGFzZTogXCJjb21wbGV0ZWRcIlxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmKHRoaXMuc3RhdGUucGhhc2UgPT09IFwicGF1c2VcIil7XHJcblx0XHRcdHRoaXMuc2V0U3RhdGUoe1xyXG5cdFx0XHRcdHdvcmtvdXQ6IHRoaXMuc3RhdGUud29ya291dCxcclxuXHRcdFx0XHRleGVyY2lzZTogdGhpcy5zdGF0ZS5leGVyY2lzZSxcclxuXHRcdFx0XHRwaGFzZTogXCJleGVyY2lzZVwiXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZih0aGlzLnN0YXRlLnBoYXNlID09PSBcImNvbXBsZXRlZFwiKXtcclxuXHRcdFx0aWYodGhpcy5zdGF0ZS53b3Jrb3V0LmV4ZXJjaXNlcy5sZW5ndGggIT09IHRoaXMudHNMaXN0Lmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKFwiYmFqIHZhblwiKTtcclxuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwLCBsID0gdGhpcy5zdGF0ZS53b3Jrb3V0LmV4ZXJjaXNlcy5sZW5ndGg7IGkgPCBsOyBpKyspe1xyXG5cdFx0XHRcdHZhciBleGVyY2lzZSA9IHRoaXMuc3RhdGUud29ya291dC5leGVyY2lzZXNbaV07XHJcblx0XHRcdFx0ZXhlcmNpc2UudHMgPSB0aGlzLnRzTGlzdFtpXTtcclxuXHRcdFx0XHRyZXN1bHQucHVzaChleGVyY2lzZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0Y29uc29sZS5sb2cocmVzdWx0KTtcclxuXHRcdFx0YXBpLnBvc3RXb3Jrb3V0KHJlc3VsdCwgZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKFwiYXBpIHBvc3Qgc3VjY2Vzc2Z1bFwiLCByZXNwb25zZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0Z2V0U3RvcHdhdGNoVHM6IGZ1bmN0aW9uKHRzKXtcclxuXHRcdHRoaXMudHNMaXN0LnB1c2godHMpO1xyXG5cdFx0Y29uc29sZS5sb2codGhpcy50c0xpc3QpO1xyXG5cdH0sXHJcblx0Z2V0Q29udHJvbEJ1dHRvblRleHQ6IGZ1bmN0aW9uKCl7XHJcblx0XHR2YXIgcGhhc2UgPSB0aGlzLnN0YXRlLnBoYXNlO1xyXG5cdFx0aWYocGhhc2UgPT09IFwiaW5pdFwiKSByZXR1cm4gXCJCZWdpbiBXb3Jrb3V0XCI7XHJcblx0XHRlbHNlIGlmKHBoYXNlID09PSBcImV4ZXJjaXNlXCIpIHJldHVybiBcIlJlYWR5XCI7XHJcblx0XHRlbHNlIGlmKHBoYXNlID09PSBcInBhdXNlXCIpIHJldHVybiBcIlN0YXJ0XCI7XHJcblx0XHRlbHNlIGlmKHBoYXNlID09PSBcImNvbXBsZXRlZFwiKSByZXR1cm4gXCJGaW5pc2ggV29ya291dFwiO1xyXG5cdH0sXHJcblx0dHNMaXN0OiBbXSxcclxuXHRyZW5kZXI6IGZ1bmN0aW9uKCl7XHJcblx0XHR2YXIgYWN0dWFsRXhlcmNpc2UgPSAoXHJcblx0XHRcdDxzdHJvbmc+YWN0dWFsOiB7dGhpcy5zdGF0ZS53b3Jrb3V0LmV4ZXJjaXNlc1t0aGlzLnN0YXRlLmV4ZXJjaXNlXS5uYW1lfSB7dGhpcy5zdGF0ZS53b3Jrb3V0LmV4ZXJjaXNlc1t0aGlzLnN0YXRlLmV4ZXJjaXNlXS53ZWlnaHR9a2c8L3N0cm9uZz5cclxuXHRcdCk7XHJcblx0XHR2YXIgbmV4dEV4ZXJjaXNlO1xyXG5cdFx0aWYodGhpcy5zdGF0ZS5leGVyY2lzZSAhPT0gdGhpcy5zdGF0ZS53b3Jrb3V0LmV4ZXJjaXNlcy5sZW5ndGggLSAxKXtcclxuXHRcdFx0bmV4dEV4ZXJjaXNlID0gKFxyXG5cdFx0XHRcdDxzdHJvbmc+bmV4dDoge3RoaXMuc3RhdGUud29ya291dC5leGVyY2lzZXNbdGhpcy5zdGF0ZS5leGVyY2lzZSArIDFdLm5hbWV9IHt0aGlzLnN0YXRlLndvcmtvdXQuZXhlcmNpc2VzW3RoaXMuc3RhdGUuZXhlcmNpc2VdLndlaWdodH1rZzwvc3Ryb25nPlxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIChcclxuXHRcdFx0PGRpdj5cclxuXHRcdFx0XHQ8aDI+V29ya291dDwvaDI+XHJcblx0XHRcdFx0e2FjdHVhbEV4ZXJjaXNlfTxiciAvPlxyXG5cdFx0XHRcdHtuZXh0RXhlcmNpc2V9PGJyIC8+XHJcblx0XHRcdFx0PGJ1dHRvbiBvbkNsaWNrPXt0aGlzLmNvbnRyb2xCdXR0b25DbGlja30+e3RoaXMuZ2V0Q29udHJvbEJ1dHRvblRleHQoKX08L2J1dHRvbj5cclxuXHRcdFx0XHQ8U3RvcHdhdGNoIHBoYXNlPXt0aGlzLnN0YXRlLnBoYXNlfSBnZXRUcz17dGhpcy5nZXRTdG9wd2F0Y2hUc30vPlxyXG5cdFx0XHQ8L2Rpdj5cclxuXHRcdCk7XHJcblx0fVxyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gV29ya291dDsiLCIvKiogQGpzeCBSZWFjdC5ET00gKi9cclxuXHJcbnZhciBhcGkgPSByZXF1aXJlKFwiLi4vaGVscGVycy9hcGlcIik7XHJcblxyXG52YXIgV29ya291dHMgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XHJcblx0Z2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpe1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0c3RhdGU6IFwibG9hZGluZ193b3Jrb3V0c1wiLFxyXG5cdFx0XHRleGVyY2lzZXM6IFtdXHJcblx0XHR9XHJcblx0fSxcclxuXHRjb21wb25lbnREaWRNb3VudDogZnVuY3Rpb24oKXtcclxuXHRcdGFwaS5nZXQoXCIvd29ya291dHNcIiwgZnVuY3Rpb24od29ya291dHMpe1xyXG5cdFx0XHRjb25zb2xlLmxvZyh3b3Jrb3V0cyk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cdHJlbmRlcjogZnVuY3Rpb24oKXtcclxuXHRcdHJldHVybiAoXHJcblx0XHRcdDxoMj5Xb3Jrb3V0czwvaDI+XHJcblx0XHQpO1xyXG5cdH1cclxufSk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFdvcmtvdXRzOyIsInZhciBhdXRoID0gcmVxdWlyZShcIi4vYXV0aFwiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG5cdGxvZzogZnVuY3Rpb24odGV4dCl7XHJcblx0XHRjb25zb2xlLmxvZyh0ZXh0KTtcclxuXHR9LFxyXG5cdGdldDogZnVuY3Rpb24odXJsLCBzdWNjZXNzKXtcclxuXHRcdCQuYWpheCh7XHJcblx0XHRcdHVybDogdXJsLFxyXG5cdFx0XHR0eXBlOiAnR0VUJyxcclxuXHRcdFx0aGVhZGVyczoge1xyXG5cdFx0XHRcdFwieC1hdXRoLXRva2VuXCI6IGF1dGguZ2V0VG9rZW4oKSxcclxuXHRcdFx0XHRcIngtYXV0aC11c2VybmFtZVwiOiBhdXRoLmdldFVzZXJuYW1lKClcclxuXHRcdFx0fSxcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XHJcblx0XHRcdFx0c3VjY2VzcyhyZXN1bHQpO1xyXG5cdFx0XHR9LmJpbmQodGhpcyksXHJcblx0XHRcdGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coc3RhdHVzKTtcclxuXHRcdFx0XHRpZih4aHIuc3RhdHVzID49IDQwMCkgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBhdXRoLmxvZ2luUGFnZTtcclxuXHRcdFx0fS5iaW5kKHRoaXMpXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cdHBvc3Q6IGZ1bmN0aW9uKHVybCwgZGF0YSwgc3VjY2Vzcyl7XHJcblx0XHQkLmFqYXgoe1xyXG5cdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0dHlwZTogJ1BPU1QnLFxyXG5cdFx0XHRkYXRhOiBkYXRhLFxyXG5cdFx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdFx0XCJ4LWF1dGgtdG9rZW5cIjogYXV0aC5nZXRUb2tlbigpLFxyXG5cdFx0XHRcdFwieC1hdXRoLXVzZXJuYW1lXCI6IGF1dGguZ2V0VXNlcm5hbWUoKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcclxuXHRcdFx0XHRzdWNjZXNzKHJlc3VsdCk7XHJcblx0XHRcdH0uYmluZCh0aGlzKSxcclxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhzdGF0dXMpO1xyXG5cdFx0XHRcdGlmKHhoci5zdGF0dXMgPj0gNDAwKSB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGF1dGgubG9naW5QYWdlO1xyXG5cdFx0XHR9LmJpbmQodGhpcylcclxuXHRcdH0pO1xyXG5cdH0sXHJcblx0cG9zdFdvcmtvdXQ6IGZ1bmN0aW9uKHdvcmtvdXQsIHN1Y2Nlc3Mpe1xyXG5cdFx0JC5hamF4KHtcclxuXHRcdFx0dXJsOiBcIi93b3Jrb3V0XCIsXHJcblx0XHRcdHR5cGU6ICdQT1NUJyxcclxuXHRcdFx0ZGF0YTogSlNPTi5zdHJpbmdpZnkoeyB0czogMSwgd29ya291dDogd29ya291dCB9KSxcclxuXHRcdFx0aGVhZGVyczoge1xyXG5cdFx0XHRcdFwieC1hdXRoLXRva2VuXCI6IGF1dGguZ2V0VG9rZW4oKSxcclxuXHRcdFx0XHRcIngtYXV0aC11c2VybmFtZVwiOiBhdXRoLmdldFVzZXJuYW1lKClcclxuXHRcdFx0fSxcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XHJcblx0XHRcdFx0c3VjY2VzcyhyZXN1bHQpO1xyXG5cdFx0XHR9LmJpbmQodGhpcyksXHJcblx0XHRcdGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coc3RhdHVzKTtcclxuXHRcdFx0XHRpZih4aHIuc3RhdHVzID49IDQwMCAmJiB4aHIuc3RhdHVzIDwgNTAwKSB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGF1dGgubG9naW5QYWdlO1xyXG5cdFx0XHR9LmJpbmQodGhpcylcclxuXHRcdH0pO1xyXG5cdH1cclxufTsiLCJ2YXIgYXV0aCA9IHtcclxuXHRsb2dpblBhZ2U6IFwiL2xvZ2luLmh0bWxcIixcclxuXHRsb2dvdXQ6IGZ1bmN0aW9uKGNhbGxiYWNrKXtcclxuXHRcdCQuYWpheCh7XHJcblx0XHRcdHVybDogXCIvbG9nb3V0XCIsXHJcblx0XHRcdHR5cGU6ICdQT1NUJyxcclxuXHRcdFx0ZGF0YToge1xyXG5cdFx0XHRcdHVzZXJuYW1lOiB0aGlzLmdldFVzZXJuYW1lKClcclxuXHRcdFx0fSxcclxuXHRcdFx0c3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XHJcblx0XHRcdFx0ZGVsZXRlIGxvY2FsU3RvcmFnZS50b2tlbjtcclxuXHRcdFx0XHRkZWxldGUgbG9jYWxTdG9yYWdlLnVzZXJuYW1lO1xyXG5cdFx0XHRcdGNhbGxiYWNrKCk7XHJcblx0XHRcdH0uYmluZCh0aGlzKSxcclxuXHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcImVycm9yIHdoaWxlIGxvZ2dpbnQgb3V0XCIpO1xyXG5cdFx0XHRcdGRlbGV0ZSBsb2NhbFN0b3JhZ2UudG9rZW47XHJcblx0XHRcdFx0ZGVsZXRlIGxvY2FsU3RvcmFnZS51c2VybmFtZTtcclxuXHRcdFx0XHRjYWxsYmFjaygpO1xyXG5cdFx0XHR9LmJpbmQodGhpcylcclxuXHRcdH0pO1xyXG5cdH0sXHJcblx0YXV0aG9yaXplOiBmdW5jdGlvbihjYWxsYmFjayl7XHJcblx0XHRpZighdGhpcy5nZXRUb2tlbigpKSB7XHJcblx0XHRcdGNhbGxiYWNrKGZhbHNlKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuYWpheCh7XHJcblx0XHRcdHVybDogXCIvYXV0aG9yaXplXCIsXHJcblx0XHRcdHR5cGU6ICdHRVQnLFxyXG5cdFx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdFx0XCJ4LWF1dGgtdG9rZW5cIjogdGhpcy5nZXRUb2tlbigpLFxyXG5cdFx0XHRcdFwieC1hdXRoLXVzZXJuYW1lXCI6IHRoaXMuZ2V0VXNlcm5hbWUoKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcclxuXHRcdFx0XHRjYWxsYmFjayh0cnVlKTtcclxuXHRcdFx0fS5iaW5kKHRoaXMpLFxyXG5cdFx0XHRlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xyXG5cdFx0XHRcdGNhbGxiYWNrKGZhbHNlKTtcclxuXHRcdFx0fS5iaW5kKHRoaXMpXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cdGdldFRva2VuOiBmdW5jdGlvbigpe1xyXG5cdFx0cmV0dXJuIGxvY2FsU3RvcmFnZS50b2tlbjtcclxuXHR9LFxyXG5cdGdldFVzZXJuYW1lOiBmdW5jdGlvbigpe1xyXG5cdFx0cmV0dXJuIGxvY2FsU3RvcmFnZS51c2VybmFtZTtcclxuXHR9LFxyXG5cdGxvZ2dlZEluOiBmdW5jdGlvbigpe1xyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0VG9rZW4oKTtcclxuXHR9LFxyXG5cdG9uQ2hhbmdlOiBmdW5jdGlvbigpe31cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYXV0aDsiXX0=
